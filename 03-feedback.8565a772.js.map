{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,SAEMC,EAAOC,SAASC,cAAc,kBAC9BC,EAAoB,sBAK1B,SAASC,EAAgBC,GAErB,IADA,IAAIC,EAAW,GACNC,EAAI,EAAGA,EAAIF,EAAaG,OAAQD,IAAK,CAC1C,IAAIE,EAAUJ,EAAaE,GACvBE,EAAQC,OACRJ,EAASG,EAAQC,MAAQD,EAAQE,OAGzC,OAAOL,EAGX,SAASM,EAAaP,EAAcQ,GAChC,IAAK,IAAIN,EAAI,EAAGA,EAAIF,EAAaG,OAAQD,IAAK,CAC1C,IAAIE,EAAUJ,EAAaE,GACvBE,EAAQC,OACRD,EAAQE,MAAQE,EAAKJ,EAAQC,OAAS,KAlBlDV,EAAKc,iBAAiB,QAASC,EAAAjB,GAAEkB,UAuBjC,SAA4BC,GACxB,GAAIA,EAAMC,cAAe,CACrB,IAAIC,EAAYf,EAAgBa,EAAMC,cAAcE,UACpDC,aAAaC,QAAQnB,EAAmBoB,KAAKC,UAAUL,OA1BD,MAC9DnB,EAAKc,iBAAiB,UA6BtB,SAAoBG,GAChBA,EAAMQ,iBACN,IAAIN,EAAYf,EAAgBJ,EAAKoB,UACrCM,QAAQC,IAAIR,GACZE,aAAaO,WAAWzB,GACxBS,EAAaK,EAAMC,cAAcE,SAAU,OAG/C,IACI,IAAIS,EAAiBN,KAAKO,MAAMT,aAAaU,QAAQ5B,IAAsB,MAC3ES,EAAaZ,EAAKoB,SAAUS,GAC9B,MAAOG,GACLN,QAAQC,IAAI,mCAAyCM,OAAND,K","sources":["src/js/03-feedback.js"],"sourcesContent":["import _ from 'lodash'\n\nconst form = document.querySelector(\".feedback-form\");\nconst formStateItemName = \"feedback-form-state\";\n\nform.addEventListener(\"input\", _.throttle(saveToLocalStorage, 500));\nform.addEventListener(\"submit\", formSubmit);\n\nfunction getFormAsObject(formElements) {\n    let formData = {};\n    for (let i = 0; i < formElements.length; i++) {\n        let element = formElements[i];\n        if (element.name) {\n            formData[element.name] = element.value;\n        }\n    }\n    return formData;\n}\n\nfunction fillFormData(formElements, data) {\n    for (let i = 0; i < formElements.length; i++) {\n        let element = formElements[i];\n        if (element.name) {\n            element.value = data[element.name] || '';\n        }\n    }\n}\n\nfunction saveToLocalStorage(event) {\n    if (event.currentTarget) {\n        let formState = getFormAsObject(event.currentTarget.elements);\n        localStorage.setItem(formStateItemName, JSON.stringify(formState));\n    }\n}\n\nfunction formSubmit(event) {\n    event.preventDefault();\n    let formState = getFormAsObject(form.elements);\n    console.log(formState);\n    localStorage.removeItem(formStateItemName);\n    fillFormData(event.currentTarget.elements, {});\n}\n\ntry {\n    let storedFormData = JSON.parse(localStorage.getItem(formStateItemName) || '{}');\n    fillFormData(form.elements, storedFormData);\n} catch (error) {\n    console.log(`Can't restore form data. Error: ${error}`);\n}\n"],"names":["$1WSnx","parcelRequire","$b00c40859be242c5$var$form","document","querySelector","$b00c40859be242c5$var$formStateItemName","$b00c40859be242c5$var$getFormAsObject","formElements","formData","i","length","element","name","value","$b00c40859be242c5$var$fillFormData","data","addEventListener","$parcel$interopDefault","throttle","event","currentTarget","formState","elements","localStorage","setItem","JSON","stringify","preventDefault","console","log","removeItem","$b00c40859be242c5$var$storedFormData","parse","getItem","error","concat"],"version":3,"file":"03-feedback.8565a772.js.map"}